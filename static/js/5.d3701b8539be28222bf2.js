webpackJsonp([5],{"1alW":function(t,e,i){var a=i("kM2E");a(a.S,"Number",{isInteger:i("AKgy")})},AKgy:function(t,e,i){var a=i("EqjI"),l=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&l(t)===t}},"RRo+":function(t,e,i){t.exports={default:i("c45H"),__esModule:!0}},c45H:function(t,e,i){i("1alW"),t.exports=i("FeBl").Number.isInteger},iNE3:function(t,e){},zWJQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("RRo+"),l=i.n(a),n={data:function(){return{date:[],tableData:[],tableData1:[],chartData:[],params:{page:1,rows:5},value6:"",changeRowArr:[],date1:[],total:null,title:"",columns1:{"钢支撑轴力":{title:"钢支撑轴力监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"110"},{field:"MeasurePointNum",title:"测点编号",width:"110"},{field:"Channel",title:"通道",width:"110"},{field:"TheLastMeasurementDate",title:"上次测试时间",width:"110"},{field:"TheLastAxialForce",title:"上次轴力值(kN)",width:"110"},{field:"ThisMeasurementDate",title:"本次测试时间",width:"150",editor:!0},{field:"ThisAxialForce",title:"本次轴力值(kN)",width:"110"},{field:"ThisChanges",title:"变化量(kN)",width:"110"},{field:"Notes",title:"备注",width:"110"}]}},extra:[{field:"Channel",title:"通道",width:"140"},{field:"Unit",title:"单位",width:"150"},{field:"PullK",title:"拉K",width:"150"},{field:"PullB",title:"拉B",width:"150"},{field:"PressK",title:"压K",width:"140"},{field:"PressB",title:"压B",width:"140"},{field:"Fzero",title:"初始频率",width:"140"}],columns2:{"钢支撑轴力":[{title:"原始数据",column:[{field:"MeasureDate",title:"测量时间",width:"100"},{field:"OriginalFreq",title:"测量频率",width:"100"},{field:"AnalysisData",title:"轴力值(kN)",width:"120"}]},{title:"分析数据",column:[{field:"MeasureDate",title:"测量时间",width:"80"},{field:"OriginalFreq",title:"测量频率",width:"80",editor:!0},{field:"AnalysisData",title:"轴力值(kN)",width:"120"}]}]},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近三十天",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近九十天",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}},{text:"最近半年",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-157248e5),t.$emit("pick",[i,e])}},{text:"最近一年",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-31536e6),t.$emit("pick",[i,e])}}]},row:"",value:""}},methods:{drawLine:function(){this.$echarts.init(document.getElementById("myChart")).setOption({legend:{y:"bottom"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t){var e="";for(var i in t[0].data)e+="<p>"+i+":"+t[0].data[i]+"</p>";return e}},dataset:{source:this.chartData},xAxis:{type:"category"},yAxis:{},series:[{type:"line"},{type:"line"}]})},onBlur:function(t,e){l()(Number(this.value6))?t.row[e.field]=this.value6:this.$message({type:"warning",message:"请输入数字"}),t.row.editable=!t.row.editable},changeRow:function(t,e){for(var i in t)e[i]=t[i]},toggle:function(t,e){t.row.editable=!t.row.editable,this.value6=e,this.$nextTick(function(){console.log(this.$refs.mark[this.$refs.mark.length-1].$el.querySelector("input")),this.$refs.mark[this.$refs.mark.length-1].$el.querySelector("input").focus()})},loadChart:function(){var t=this,e={type:this.value,id:this.tableData[0].id,startTime:this.date1[0],endTime:this.date1[1]};this.$api.post("report/pointChart",e,function(e){t.chartData=e.data,t.drawLine()})},loadData:function(){var t=this,e={page:this.params.page,rows:this.params.rows,type:this.value,id:this.tableData[0].id,startTime:this.date1[0],endTime:this.date1[1]};this.$api.post("report/pointData",e,function(e){for(var i in e.rows)e.rows[i].editable=!1;t.tableData1=e.rows,t.total=e.total})},search:function(){this.loadData(),this.loadChart()},handleSizeChange:function(t){this.params.rows=t,this.loadData()},handleCurrentChange:function(t){this.params.page=t,this.loadData()}},mounted:function(){this.drawLine()},created:function(){var t=new Date,e=new Date;e.setTime(e.getTime()-2592e6),this.date1=[e,t],this.value=sessionStorage.getItem("type"),this.tableData.push(JSON.parse(sessionStorage.getItem("table"))),this.title=this.tableData[0].MonitorPointPart+this.value+"监测点"}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("page-title",[t._v(t._s(t.title))]),t._v(" "),i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{xs:24,sm:24,lg:24}},[i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,stripe:"","row-style":{height:"65px"}}},[t._l(t.columns1[t.value].columns,function(t){return[i("el-table-column",{key:t.field,attrs:{prop:t.field,label:t.title,"min-width":t.width}})]})],2),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",data:t.tableData,stripe:"","row-style":{height:"65px"}}},[t._l(t.extra,function(t){return[i("el-table-column",{key:t.field,attrs:{prop:t.field,label:t.title,"min-width":t.width}})]})],2),t._v(" "),i("div",{staticStyle:{"margin-top":"20px",float:"left"}},[i("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:t.search},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}}),t._v(" "),i("el-button",{attrs:{type:"success"},on:{click:t.search}},[t._v("搜索")])],1)],1)])],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("div",{style:{width:"100%",height:"300px"},attrs:{id:"myChart"}})]),t._v(" "),i("el-row"),t._v(" "),i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{xs:24,sm:24,lg:24}},[i("div",[i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",data:t.tableData1,stripe:"","row-style":{height:"65px"}}},[t._l(t.columns2[t.value],function(e){return[e.fix?[i("el-table-column",{attrs:{label:e.title,fixed:"right"}},[t._l(e.column,function(t){return[i("el-table-column",{key:t.field,attrs:{prop:t.field,label:t.title,"min-width":t.width}})]})],2)]:[i("el-table-column",{attrs:{label:e.title}},[t._l(e.column,function(e){return[e.editor?i("el-table-column",{attrs:{prop:e.field,label:e.title,"min-width":e.width},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.editable?[i("el-input",{ref:"mark",refInFor:!0,on:{blur:function(i){t.onBlur(a,e)}},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}})]:[i("div",{staticStyle:{width:"100%"},on:{click:function(i){t.toggle(a,a.row[e.field])}}},[t._v(t._s(a.row[e.field]))])]]}}])}):i("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,"min-width":e.width}})]})],2)]]})],2),t._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"20px",float:"left"}},[i("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-sizes":[10,20,30,50],"page-size":t.params.rows,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"20px",float:"right"}},[i("el-button",{attrs:{type:"success"},on:{click:t.search}},[t._v("保存数据分析并返回")]),t._v(" "),i("el-button",{on:{click:t.search}},[t._v("取消")]),t._v(" "),i("el-button",{on:{click:t.search}},[t._v("导出ECXEL")])],1)],1)])],1)],1)},staticRenderFns:[]};var o=i("VU/8")(n,r,!1,function(t){i("iNE3")},"data-v-28095f62",null);e.default=o.exports}});
//# sourceMappingURL=5.d3701b8539be28222bf2.js.map