{"version":3,"sources":["webpack:///src/views/Report/NewReport.vue","webpack:///./src/views/Report/NewReport.vue?656c","webpack:///./src/views/Report/NewReport.vue"],"names":["NewReport","data","tableData","params","page","rows","total","multipleSelection","methods","loadData","v","this","p","$api","post","r","xzbb","_this","length","hash","map","item","index","arr","MonitorPointType","Type","MeasurePointNumber","reduce","next","push","stringify_default","$message","type","message","handleSelectionChange","val","handleSizeChange","handleCurrentChange","created","Report_NewReport","render","_vm","_h","$createElement","_c","_self","_v","attrs","gutter","xs","sm","lg","staticStyle","width","stripe","on","selection-change","label","prop","min-width","staticClass","margin-top","display","background","current-page","page-sizes","page-size","layout","Number","size-change","current-change","float","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+HAsBAA,GACAC,KADA,WAEA,OACAC,aACAC,QACAC,KAAA,EACAC,KAAA,GAEAC,MAAA,KACAC,uBAGAC,SACAC,SADA,WAEA,IAAAC,EAAAC,KACAC,GACAR,KAAAO,KAAAR,OAAAC,KACAC,KAAAM,KAAAR,OAAAE,MAEAM,KAAAE,KAAAC,KAAA,mBAAAF,EAAA,SAAAG,GACAL,EAAAR,UAAAa,EAAAV,KACAK,EAAAJ,MAAAS,EAAAT,SAGAU,KAZA,WAYA,IAAAC,EAAAN,KACA,MAAAA,KAAAJ,kBAAAW,OAAA,CAOA,IAAAC,KACAP,EAAAD,KAAAJ,kBAAAa,IAAA,SAAAC,EAAAC,EAAAC,GACA,OAAAC,iBAAAH,EAAAI,KAAAC,mBAAAL,EAAAK,sBAEAd,IAAAe,OAAA,SAAAN,EAAAO,GAEA,OADAT,EAAAS,EAAAJ,oBAAAL,EAAAS,EAAAJ,kBAAAH,EAAAQ,KAAAD,IACAP,OAEAT,EAAAkB,IAAAlB,GACAD,KAAAE,KAAAC,KAAA,iBAAAb,KAAAW,GAAA,SAAAG,GACAE,EAAAc,UACAC,KAAA,UACAC,QAAA,kBAlBAtB,KAAAoB,UACAC,KAAA,UACAC,QAAA,WAoBAC,sBApCA,SAoCAC,GACAxB,KAAAJ,kBAAA4B,GAEAC,iBAvCA,SAuCAD,GACAxB,KAAAR,OAAAE,KAAA8B,EACAxB,KAAAF,YAEA4B,oBA3CA,SA2CAF,GACAxB,KAAAR,OAAAC,KAAA+B,EACAxB,KAAAF,aAGA6B,QA5DA,WA6DA3B,KAAAF,aChFA8B,GADiBC,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,cAAAH,EAAAK,GAAA,UAAAL,EAAAK,GAAA,KAAAF,EAAA,UAA4EG,OAAOC,OAAA,MAAaJ,EAAA,UAAeG,OAAOE,GAAA,GAAAC,GAAA,GAAAC,GAAA,MAAyBP,EAAA,OAAAA,EAAA,YAA2BQ,aAAaC,MAAA,QAAeN,OAAQ9C,KAAAwC,EAAAvC,UAAAoD,OAAA,IAAiCC,IAAKC,mBAAAf,EAAAP,yBAA8CU,EAAA,mBAAwBG,OAAOf,KAAA,YAAAyB,MAAA,KAAAJ,MAAA,SAA+CZ,EAAAK,GAAA,KAAAF,EAAA,mBAAoCG,OAAOW,KAAA,OAAAD,MAAA,OAAAE,YAAA,SAAgDlB,EAAAK,GAAA,KAAAF,EAAA,mBAAoCG,OAAOW,KAAA,qBAAAD,MAAA,OAAAE,YAAA,UAA8D,GAAAlB,EAAAK,GAAA,KAAAF,EAAA,OAA4BgB,YAAA,uBAAAR,aAAgDS,aAAA,OAAAR,MAAA,MAAAS,QAAA,kBAA4DlB,EAAA,iBAAsBG,OAAOgB,WAAA,GAAAC,eAAAvB,EAAAtC,OAAAC,KAAA6D,cAAA,aAAAC,YAAAzB,EAAAtC,OAAAE,KAAA8D,OAAA,0CAAA7D,MAAA8D,OAAA3B,EAAAnC,QAAoLiD,IAAKc,cAAA5B,EAAAL,iBAAAkC,iBAAA7B,EAAAJ,wBAA6E,GAAAI,EAAAK,GAAA,KAAAF,EAAA,aAAkCQ,aAAamB,MAAA,QAAAV,aAAA,QAAoCN,IAAKiB,MAAA,SAAAC,GAAyBhC,EAAAzB,WAAayB,EAAAK,GAAA,yBAErqC4B,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA7E,EACAuC,GATA,EAVA,SAAAuC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/11.c9acea43dffa45c4ca82.js","sourcesContent":["<template>\r\n  <div>\r\n    <page-title>新增报表</page-title>\r\n    <el-row :gutter=\"40\">\r\n      <el-col :xs=\"24\" :sm=\"24\" :lg=\"24\">\r\n        <div>\r\n          <el-table :data=\"tableData\" @selection-change=\"handleSelectionChange\" stripe style=\"width: 100%\">\r\n            <el-table-column type=\"selection\" label=\"序号\" width=\"160\"></el-table-column>\r\n            <el-table-column prop=\"Type\"  label=\"监测类型\" min-width=\"100\"></el-table-column>\r\n            <el-table-column prop=\"MeasurePointNumber\" label=\"测点编号\" min-width=\"100\"></el-table-column>\r\n          </el-table>\r\n          <div class=\"pagination-container\" style=\"margin-top: 20px;width: 50%;display: inline-block;\">\r\n            <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"params.page\" :page-sizes=\"[10,20,30, 50]\" :page-size=\"params.rows\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"Number(total)\">\r\n            </el-pagination>\r\n          </div>\r\n          <el-button @click=\"xzbb()\" style=\"float:right;margin-top: 20px;\">新增报表</el-button>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n      return {\r\n        tableData: [],\r\n        params: {\r\n          page: 1,\r\n          rows: 5\r\n        },\r\n        total: null,\r\n        multipleSelection: []\r\n      }\r\n    },\r\n    methods: {\r\n      loadData() {\r\n        let v = this\r\n        let p = {\r\n          page :this.params.page,\r\n          rows :this.params.rows\r\n        }\r\n        this.$api.post('report/report_mp', p, r => {\r\n          v.tableData = r.rows\r\n          v.total = r.total\r\n        })\r\n      },\r\n      xzbb() {\r\n        if(this.multipleSelection.length == 0){\r\n          this.$message({\r\n            type: 'warning',\r\n            message: '请选择类型'\r\n          });\r\n          return \r\n        }\r\n        let hash = {};\r\n        let p = this.multipleSelection.map((item,index,arr) => {\r\n          return  { \"MonitorPointType\": item.Type, \"MeasurePointNumber\": item.MeasurePointNumber }\r\n        })\r\n        p = p.reduce((item, next) => {\r\n          hash[next.MonitorPointType] ? '' : hash[next.MonitorPointType] = true && item.push(next);\r\n          return item \r\n        }, []) \r\n        p = JSON.stringify(p)\r\n        this.$api.post('report/create', {data:p}, r => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '报表生成成功'\r\n          }); \r\n        })\r\n      },\r\n      handleSelectionChange(val) {\r\n        this.multipleSelection = val\r\n      },\r\n      handleSizeChange(val) {\r\n        this.params.rows = val\r\n        this.loadData()\r\n      },\r\n      handleCurrentChange (val){\r\n        this.params.page = val\r\n        this.loadData()\r\n      }\r\n    },\r\n    created () {\r\n      this.loadData()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Report/NewReport.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('page-title',[_vm._v(\"新增报表\")]),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"lg\":24}},[_c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"label\":\"序号\",\"width\":\"160\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Type\",\"label\":\"监测类型\",\"min-width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"MeasurePointNumber\",\"label\":\"测点编号\",\"min-width\":\"100\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination-container\",staticStyle:{\"margin-top\":\"20px\",\"width\":\"50%\",\"display\":\"inline-block\"}},[_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.params.page,\"page-sizes\":[10,20,30, 50],\"page-size\":_vm.params.rows,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":Number(_vm.total)},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-top\":\"20px\"},on:{\"click\":function($event){_vm.xzbb()}}},[_vm._v(\"新增报表\")])],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e554468\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Report/NewReport.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e554468\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NewReport.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewReport.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewReport.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e554468\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./NewReport.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4e554468\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Report/NewReport.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}