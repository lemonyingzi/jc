webpackJsonp([15],{"0CvW":function(t,e){},cqrm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),l=i.n(a),s={data:function(){return{date:[],value6:"",tableData:[],params:{page:1,rows:5},changeRowArr:[],total:null,title:"",columns:{"水位":{title:"水位监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"60"},{field:"MeasurePointNum",title:"测点编号",width:"80"},{field:"InitialMeasureDate",title:"初测日期",width:"120"},{field:"InitialData",title:"初测水位高程(m)",width:"100"},{field:"TheLastMeasurementDate",title:"上次测试时间",width:"120"},{field:"TheLastData",title:"上次水位高程(m)",width:"120"},{field:"ThisMeasurementDate",title:"本次测试时间",width:"150",editor:!0},{field:"ThisData",title:"本次水位高程(m)",width:"120"},{field:"WaterLevelChangeRate",title:"本次水位变化速率(mm/d)",width:"120"},{field:"TotalWaterLevelChange",title:"本次总水位变化(mm)",width:"120"},{field:"Notes",title:"备注",width:"60"}],src:"NewReport_detail",name:"水位水准数据报表详情"},"液压水准":{title:"液压水准监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"60"},{field:"MeasureNetworkNum",title:"测量网络编号",width:"80"},{field:"MeasurePointNum",title:"测点编号",width:"80"},{field:"TheLastMeasurementDate",title:"上次测试时间",width:"100"},{field:"TheLastTotalSedimentation",title:"上次累计沉降量",width:"100"},{field:"ThisMeasurementDate",title:"本次测试时间",width:"150",editor:!0},{field:"ThisTotalSedimentation",title:"本次累计沉降量",width:"100"},{field:"ThisSedimentation",title:"本次沉降量",width:"100"},{field:"ThisSedimentationRate",title:"本次沉降速率",width:"100"},{field:"Notes",title:"备注",width:"100"}],src:"NewReport_detail",name:"水位水准数据报表详情"},"深层水平位移":{title:"深层水平位移监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"100"},{field:"MeasurePointNum",title:"测点编号",width:"100"},{field:"TheLastMeasureDate",title:"上次测试时间",width:"100"},{field:"TheLastMaxTotalChanges",title:"上次累计最大水平位移",width:"100"},{field:"ThisMeasureDate",title:"本次测试时间",width:"100"},{field:"ThisMaxChanges",title:"本次最大水平位移",width:"100"},{field:"ThisMaxTotalChanges",title:"本次累计最大水平位移",width:"100"},{field:"ThisMaxChangesDepth",title:"本次相应位移深度",width:"100"},{field:"ThisMaxTotalChangesDepth",title:"本次最大相应位移深度",width:"100"},{field:"Notes",title:"备注",width:"100"}],src:"NewReport_detail_DHD",name:"深层水平位移数据报表详情"},"钢支撑轴力":{title:"钢支撑轴力监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"110"},{field:"MeasurePointNum",title:"测点编号",width:"110"},{field:"Channel",title:"通道",width:"110"},{field:"TheLastMeasurementDate",title:"上次测试时间",width:"110"},{field:"TheLastAxialForce",title:"上次轴力值(kN)",width:"110"},{field:"ThisMeasurementDate",title:"本次测试时间",width:"150",editor:!0},{field:"ThisAxialForce",title:"本次轴力值(kN)",width:"110"},{field:"ThisChanges",title:"变化量(kN)",width:"110"},{field:"Notes",title:"备注",width:"110"}],src:"NewReport_detail_SSAF",name:"钢支撑轴力数据报表详情"},"混凝土支撑轴力":{title:"混凝土支撑轴力监测点数据汇总",columns:[{field:"MonitorPointPart",title:"测点部位",width:"130"},{field:"MeasurePointNum",title:"测点编号",width:"130"},{field:"TheLastMeasurementDate",title:"上次测试时间",width:"130"},{field:"TheLastTotalForce",title:"上次轴力值(kN)",width:"130"},{field:"ThisMeasurementDate",title:"本次测试时间",width:"150",editor:!0},{field:"ThisTotalForce",title:"本次轴力值(kN)",width:"120"},{field:"ThisChanges",title:"变化量(kN)",width:"120"},{field:"Notes",title:"备注",width:"120"}],src:"NewReport_detail_CSAF",name:"混凝土支撑轴力数据报表详情"}},MonitorPointType:null,value:""}},methods:{rowDblclick:function(t,e){this.$router.push({path:"Report/"+this.columns[this.value].src,name:this.columns[this.value].name}),sessionStorage.setItem("table",l()(t)),sessionStorage.setItem("type",this.value)},changeType:function(t){this.loadData(),this.title=this.value},changeRow:function(t,e){for(var i in t)e[i]=t[i]},toggle:function(t,e){var i=this;this.changeRowArr.includes(t.$index)||this.changeRowArr.push(t.$index),this.value6=e;var a={type:this.value,id:t.row.id};this.$api.post("report/selectDate",a,function(e){i.date=e.data,t.row.editable=!t.row.editable,i.$nextTick(function(){this.$refs.mark[this.$refs.mark.length-1].$el.querySelector("input").click()})})},save:function(){var t=this;if(0!=this.changeRowArr.length){var e={type:this.value,data:[]};for(var i in this.changeRowArr)e.data.push(this.tableData[this.changeRowArr[i]]);e.data=l()(e.data),this.$api.post("report/modifySummary",e,function(e){t.loadData(),t.$message({type:"success",message:"保存成功"})})}else this.$message({type:"warning",message:"没有数据修改"})},loadData:function(){this.changeRowArr=[];var t=this,e={page:this.params.page,rows:this.params.rows,type:this.value,reportID:this.$route.params.id};this.$api.post("report/summary",e,function(e){for(var i in e.rows)e.rows[i].editable=!1;t.tableData=e.rows,t.total=e.total})},handleSizeChange:function(t){this.params.rows=t,this.loadData()},handleCurrentChange:function(t){this.params.page=t,this.loadData()}},activated:function(){this.MonitorPointType=JSON.parse(sessionStorage.getItem("a")),this.loadData()},created:function(){this.MonitorPointType=JSON.parse(sessionStorage.getItem("a")),this.title=this.columns[this.MonitorPointType[0].MonitorPointType].title,this.value=this.MonitorPointType[0].MonitorPointType}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("page-title",[t._v(t._s(t.title))]),t._v(" "),i("el-row",[t._v("类型：\n    "),i("el-select",{attrs:{placeholder:"请选择",filterable:!0},on:{change:t.changeType},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.MonitorPointType,function(t,e,a){return i("el-option",{key:a,attrs:{label:t.MonitorPointType,value:t.MonitorPointType}})}))],1),t._v(" "),i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{xs:24,sm:24,lg:24}},[i("div",[i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{border:"",data:t.tableData,stripe:"","row-style":{height:"65px"}},on:{"row-dblclick":t.rowDblclick}},[t._l(t.columns[t.value].columns,function(e){return[e.editor?i("el-table-column",{attrs:{prop:e.field,label:e.title,"min-width":e.width},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.editable?[i("el-select",{ref:"mark",refInFor:!0,attrs:{"value-key":"ThisMeasurementDate"},on:{change:function(e){t.changeRow(e,a.row)}},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}},t._l(t.date,function(t,e,a){return i("el-option",{key:a,attrs:{label:t.ThisMeasurementDate,value:t}})}))]:[i("div",{staticStyle:{width:"100%"},on:{click:function(i){t.toggle(a,a.row[e.field])}}},[t._v(t._s(a.row[e.field]))])]]}}])}):i("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,"min-width":e.width}})]})],2),t._v(" "),i("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"20px",float:"left"}},[i("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-sizes":[10,20,30,50],"page-size":t.params.rows,layout:"total, sizes, prev, pager, next, jumper",total:Number(t.total)},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px",float:"right"},attrs:{type:"success"},on:{click:t.save}},[t._v("保存报表")])],1)])],1)],1)},staticRenderFns:[]};var n=i("VU/8")(s,o,!1,function(t){i("0CvW")},"data-v-0c376704",null);e.default=n.exports}});
//# sourceMappingURL=15.a03e319e5962e8ac26e3.js.map